{% extends "gpt/base.html" %}

{% block title %}Results{% endblock %}

{# Pass some data to the JavaScript #}
{% block meta %}
  <meta name='resultset_archived' content='{{ resultset.archived }}' />
  <meta name='resultset_id' content='{{ resultset.id }}' />
{% endblock %}

{% block content %}
  <h1>Results set</h1>
  <div>
    <input id='save_button' type='button' value='Save result set'/>
    <p>
      Query: <span id='query'>{{ resultset.query }}</span>
    </p>
  </div>
  {% if resultset.genes.all()|length == 0 %}
    No genes found!
  {% endif %}
  <p>
  {% for g in resultset.genes.all() %}
    <div>
      <h3>Gene {{ g.uid }}</h3>

      {{ g.description }},
      {{ g.chromosome }},
      {{ g.geneticsource }},
      {{ g.organism_name }},
      {{ g.organism_commonname }},
      {{ g.organism_taxid }},
      {{ g.summary }},

      {% for ginfo in g.genomicinfo_set.all() %}
        <div>
          {{ ginfo.chrloc }},
          {{ ginfo.chraccver }},
          {{ ginfo.chrstart }},
          {{ ginfo.chrstop }},
          {{ ginfo.exoncount }}
        </div>
      {% endfor %}

      {% for lochist in g.locationhist_set.all() %}
        <div>
          {{ lochist.annotationrelease }},
          {{ lochist.assemblyaccver }},
          {{ lochist.chraccver }},
          {{ lochist.chrstart }},
          {{ lochist.chrstop }},
        </div>
      {% endfor %}

      {% for p in g.protein_set.all() %}
        <h4>Protein {{ p.uid }}</h4>
        <div>
          {{ p.caption }},
          {{ p.title }},
          {{ p.extra }},
          {{ p.gi }},
          {{ p.createdate }},
          {{ p.updatedate }},
          {{ p.taxid }},
          {{ p.slen }},
          {{ p.projectid }},
          {{ p.genome }},
          {{ p.organism }},
        </div>
      {% endfor %}
    </div>
  {% endfor %}
  </p>
{% endblock %}

